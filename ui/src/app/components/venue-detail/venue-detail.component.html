<div class="container mt-4" *ngIf="venue">
<h1>{{ venue.name }}</h1>

<a href="{{ createGoogleMapsQuery(venue) }}">{{ venue.address }}</a>

<p>{{ venue.description }}</p>

<table class="table">
  <thead>
    <tr>
      <th>{{ "venue.date" | translate }}</th>
      <th>{{ "venue.time" | translate }}</th>
      <th>{{ "venue.duration" | translate }}</th>
      <th>{{ "venue.type" | translate }}</th>
      <th class="text-end">{{ "venue.pay" | translate }}</th>
      <th class="text-center">{{ "venue.availability" | translate }}</th>
      <th>{{ "venue.option" | translate }}</th>
    </tr>
  </thead>
  <tbody>

    <tr *ngIf="isRessourceOwner" class="table-success">
      <td>
        <div class="form-floating">
          <input id="newDate" type="date" [(ngModel)]="newDate" min="2023-12-08" max="2023-12-23" id="tsdate" class="form-control">
          <label for="newDate">New Date</label>
        </div>
      </td>

      <td>
        <div class="form-floating">
          <input id="newTime" type="time" [(ngModel)]="newTime" class="form-control">
          <label for="newTime">New Time</label>
        </div>
      </td>

      <td>
        <div class="form-floating">
          <input id="duration" type="number" [(ngModel)]="newTimeslot.duration" class="form-control">
          <label for="duration">Duration (min)</label>
        </div>
      </td>

      <td>
        <div class="form-floating">
          <select id="newType" class="form-select" [(ngModel)]="newTimeslot.private">
            <option [ngValue]="false">public</option>
            <option [ngValue]="true">private</option>
          </select>
          <label for="newType">Type</label>
        </div>
      </td>

      <td class="w-25">
        <div class="form-floating">
          <input id="pay" type="number" [(ngModel)]="newTimeslot.pay" class="form-control">
          <label for="pay">CHF</label>
        </div>
      </td>

      <td></td>

      <td>
        <button class="btn btn-outline-success" (click)="addTimeSlot()">add</button>
      </td>
    </tr>

    <tr *ngFor="let slot of venue.slots">

      <td>{{ slot.time | date:"dd. MMM yyyy" }}</td>
      <td>{{ slot.time | date:"HH:mm" }}</td>

      <td class="text-end">{{ slot.duration }} min</td>

      <td><i class="{{ slot.private ? 'bi bi-house-lock' : 'bi bi-people-fill' }}" title="{{ slot.private ? 'private' : 'public' }}"></i></td>
      
      <td class="text-end">{{ slot.pay }} CHF</td>

      <td class="text-center">
        <span *ngIf="slot.artistID !== 0" class="badge text-bg-warning">booked</span>
        <span *ngIf="slot.artistID === 0" class="badge text-bg-success">available</span>
      </td>

      <td *ngIf="!isRessourceOwner && isArtist">
        <button *ngIf="slot.artistID === 0" class="btn"
          class="{{ hasAlreadyApplied(slot) ? 'disabled btn-sm btn-outline-warning' : 'btn-success' }}" 
          (click)="applyForTimeslot($event, slot)">{{ hasAlreadyApplied(slot) ? "pending" : "apply" }}</button>
      </td>

      <td *ngIf="!isRessourceOwner && !isArtist"></td>

      <td *ngIf="isRessourceOwner">
        <button *ngIf="slot.artistID === 0" class="btn btn-outline-danger" (click)="deleteTimeslot(slot)">delete</button>
        <button *ngIf="slot.artistID !== 0" class="btn btn-outline-secondary" disabled>delete</button>
      </td>

    </tr>
  </tbody>
</table>
</div>
